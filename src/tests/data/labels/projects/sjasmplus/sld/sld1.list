# file opened: main.asm
 1    0000
 2    0000
 3    0000                  DEVICE ZXSPECTRUMNEXT
 4    0000
 5    0000
 6    0000
 7    0000              	ORG 0x8000
 8    8000
 9    8000              main:
10    8000                  ; Disable interrupts
11    8000 F3               di
12    8001 31 01 81         ld sp,stack_top
13    8004
14    8004
15    8004 ED 91 55 5E      nextreg 0x50+5,94
16    8008 ED 91 55 5F      nextreg 0x50+5,95
17    800C ED 91 55 60      nextreg 0x50+5,96
18    8010 ED 91 55 61      nextreg 0x50+5,97
19    8014 ED 91 55 6F      nextreg 0x50+5,111
20    8018
21    8018
22    8018              .loop:
23    8018                  ; Bank 100
24    8018 ED 91 55 64      nextreg 0x50+5,100
25    801C CD 00 A0         call sub_b100
26    801F 00               nop
27    8020 00               nop
28    8021
29    8021                  ; Bank 101
30    8021 ED 91 55 65      nextreg 0x50+5,101
31    8025 CD 00 A0         call sub_b101
32    8028 00               nop
33    8029 00               nop
34    802A
35    802A                  ; Bank 110
36    802A ED 91 55 6E      nextreg 0x50+5,110
37    802E CD 00 A0         call sub_b110
38    8031 00               nop
39    8032 00               nop
40    8033
41    8033 00           	nop
42    8034 00           	nop
43    8035 18 E1        	jr .loop
44    8037
45    8037
46    8037              ; Stack: this area is reserved for the stack
47    8037              STACK_SIZE: equ 100    ; in words
48    8037
49    8037
50    8037              ; Reserve stack space
51    8037 00 00            defw 0  ; WPMEM, 2
52    8039              stack_bottom:
53    8039 00 00 00...      defs    STACK_SIZE*2, 0
54    8101              stack_top:
55    8101                  ;defw 0
56    8101 00 00            defw 0  ; WPMEM, 2
57    8103
58    8103
59    8103
60    8103
61    8103                  MMU 5, 100, 0xA000
62    A000              sub_b100:
63    A000 3E 64            ld a,100
64    A002 3E 64            ld a,100
65    A004 C9               ret
66    A005
67    A005
68    A005                  MMU 5, 101, 0xA000
69    A000              sub_b101:
70    A000 3E 65            ld a,101
71    A002 3E 65            ld a,101
72    A004 C9               ret
73    A005
74    A005
75    A005                  include "subfolder/sub1.asm"
# file opened: subfolder/sub1.asm
 1+   A005
 2+   A005                  MMU 5, 110, 0xA000
 3+   A000              sub_b110:
 4+   A000 3E 6E            ld a,110
 5+   A002 3E 6E            ld a,110
 6+   A004 C9               ret
 7+   A005
# file closed: subfolder/sub1.asm
76    A005
77    A005
78    A005                  SAVENEX OPEN "sld1.nex", main, stack_top
79    A005                  SAVENEX CORE 2, 0, 0        ; Next core 2.0.0 required as minimum
80    A005                  SAVENEX CFG 7   ; Border color
81    A005                  SAVENEX AUTO
82    A005                  SAVENEX CLOSE
83    A005
# file closed: main.asm
